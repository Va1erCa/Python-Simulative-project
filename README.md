# Финальный проект модуля Python + ООП от Simulative #
**by Va1erCa [Va1errCa] (Жидков Валерий)**

Задача построения подсистемы сбора/обработки/размещение на локальном Postgres-сервере информации об учебном процессе студентов он-лайн университета.

## Модули/файлы проекта: ##
* `data_processor.py` - основной модуль приложения
* `get_data.py` - получение данных с сетевого ресурса по api
* `put_data.py` - сохранение данных в БД PostgreSQL (на локальный сервер)
* `logger.py` - инициализация регистратора
* `exceptions.py` - собственные исключения приложения
* `app_types.py` - общие типы приложения
* `config.py` - константы / настройки  
* `requirements.txt` - перечень требуемых библиотек
* `.env` - файл с переменными окружения ( \<client> , \<client_key> )

  
### requirements.txt ###
* cформирован с помощью команды:
    * ```pipreqs --force``` (утилита ```pipreqs``` устанавливается командой ```pip install pipreqs```)
* развертывание библиотек командой:
    * ```pip install -r requirements.txt ```

## Описание ##
Приложение реализует механизм сбора данных с помощью API с сетевого ресурса (itresume.ru), обработку и размещение в локальную базу данных (PostgerSQL), указанные операции сопровождаются логированием.

В начале работы приложение запрашивает у пользователя дату, за которую будет производится обработка.
Далее обработка осуществляется автоматически и состоит из этапов:
1. Опрос сетевого ресурса по api, сбор данных за выбранный временной диапазон
2. Инициализация соединения с базой данных на лкальном сервере, подготовка таблицы в случае необходимости
3. Запись данных в базу
4. Подготовка отчета в публичной эл.таблице Google Sheets для руководства,  
5. Оповещение заинтересованных лиц о произведенных действиях по эл.почте
   * все этапы сопровождаются логированием процесса выполнения приложения 

Для успешной работы приложения должен быть развернут PostgreSQL-сервер на локальной машине. В котором необходимо завести базу с именем и параметрами указанными в константе `SERVER_CONNECTION_PARAMS` файла `config.py`.

Создание таблицы в БД для сохранения результатов обработки производится автоматически. Необходимость полной очистки таблицы в начале очередного сеанса работы приложения задается константой `DB_MAIN_TABLE_OPEN_RESET = True`.    

В модуле `config.py` сохранены некоторые настройки приложения. Например, флаг тестового режима `TEST_APP_MODE` (если он равен `True`, обрабатываются данные только за первый час выбранной пользователем даты), флаг глубины хранения логов (по умолчанию - 3 файла), путь к папке хранения логов (по умолчанию - `.logs`) и т.д. 

Все константы (настройки) в модуле `config.py` снабжены поясняющими комментариями, помните, чтобы не нарушить работоспособность приложения изменяйте их по необходимости и осмысленно ;) .

В приложении осуществлена языковая поддержка, т.е. возможность представить взаимодействие с пользователем и логирование на русском (`CURR_LANG = RUSSIAN`) либо на английском (`CURR_LANG = ENGLISH`) языках.
